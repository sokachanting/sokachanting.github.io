<html>
<head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.1.1/howler.min.js" ></script>
<script src="./js/howler-rabbit.js" ></script>
<link rel="stylesheet" href="./js/howler-rabbit.css">
<script>
    var spriteList = {
        DailyPractice: [0, 298000],
        Chanting: [298000, 10000],
        Finishing: [339000, 86000]
    };
    
    var sound2 = new Howl({
      src: ['chanting.mp3'],
      html5: true      
    });  
    
    function playspeed(){
        myspeed=document.getElementById('myrate').value;
        sound2.rate(myspeed);
        sound2.play();
        document.getElementById('playtime').value=sound2.duration();
    }
    
    var sound = new Howl({
      src: ['chanting.mp3'],
      html5: true,
      sprite: spriteList,
      onend: function() {
         console.log('Finished!');
         myend();
      },
      onplay: function() {
         console.log('started!');
         myplay();
      },
        
    });  
    var currentTime=0;
    var mytimer = null;
    
    function myend() {
        //alert('ended');  
        clearInterval(mytimer);
        var minutesRequired = document.getElementById('playminutes').value;
        console.log('minutesRequired :'+minutesRequired);
        var targetMillionSecond = minutesRequired*60*1000 - spriteList.Finishing[1];
        console.log('targetMillionSecond :'+targetMillionSecond);
        if (currentTime >= 298000 && currentTime < targetMillionSecond){
           soundid=sound.play('Chanting');
        } else if (currentTime > targetMillionSecond && currentTime < minutesRequired*60*1000){
          soundid=sound.play('Finishing');
        }      
    };
    
    function myplay() {
        //alert('started');
        mytimer = setInterval(myTimerFunction, 100);
    };
    
    function myTimerFunction() {
        synchronize(currentTime /1000.0);
        document.getElementById('playtime').value=currentTime;
        currentTime += 100;
    }
      
/*
    var currentTime=0;
    var soundid = null;
    function myTimer() {
      currentTime += 100;
      
      synchronize(currentTime /1000.0);
      document.getElementById('playtime').value=sound.seek(soundid);
      if (currentTime == 100) {
         soundid=sound.play('DailyPractice');
      }
      
      if (currentTime < 300100) return;
      if (currentTime > 300100 && currentTime < 600100){
          soundid=sound.play('Chanting');
      }
      if (currentTime == 600100){
          soundid=sound.play('Finishing');
      }
    }
*/
    function playchanting() {
        
        var start = document.getElementById('start').value;
        var duration = document.getElementById('duration').value;
        alert ("start: "+ start+" duration:"+duration);
        sound.sprite = {
            Split: [start, duration]
        }
        
        sound.play('Split');
        alert ("played");
    }
    function insertTime(){
        var sec = Math.floor(currentTime /1000);
        var min = Math.floor(sec / 60);
        var minisec = ((currentTime - sec*1000 ) / 1000.0).toFixed(2)
        sec = Math.floor(currentTime /1000) - min*60;        
        sec = (parseFloat(sec) + parseFloat(minisec)).toFixed(2);
        parsedTime= (min>=10?"":"0")+min+":"+(sec>=10?"":"0")+sec;
        let lineElement = document.createElement("div");
        lineElement.innerHTML = parsedTime;
        document.getElementById('timeDiv').appendChild(lineElement);
    }
    function playTime(){
        currentTime = 0;
        alert ('testing: ' + spriteList.DailyPractice[1]);
        //alert('duration: '+sound.duration('DailyPractice')+' '+sound.duration('Chanting') + ' ' + sound.duration('Finishing') +' end');
//        var myVar = setInterval(myTimer, 100);
        //var inTime = document.getElementById('playminutes').value;
        //var nTime = (inTime*60 - 386)/10;
        //sound.play('DailyPractice');
        //for (i=0; i< nTime; i++){
        //    sound.play('Chanting');
        //}
        //sound.play('Finishing');
    }
</script>
</head>
<body>
<!-- 
<button name=play value=play onclick="document.getElementById('audio-1').play()" > Play </button>
--> 
   
    <input name="start" type="text" id="start"></input>    
    </br>
    <input name="duration" type="text" id="duration"> </input>  
    <br>
    <button name=play1 value=play1 onclick="playchanting()" > Play chanting</button>

</br></br></br></br>
version 31
</br>

    <input name="playminutes" type="text" id="playminutes" value="10"></input>  
    <br>
    <button name=playminutes value=playminutes onclick="playTime()" > Play by time</button>
    <br/>
     <input name="playtime" type="text" id="playtime"></input>    
</br></br></br></br></br>
    
<button name=play1 value=play1 onclick="sound.play('DailyPractice')" > Play DailyPractice</button>
<button name=play1 value=play1 onclick="insertTime()" > Insert Time</button>
<button name=play2 value=play2 onclick="sound.play('Chanting')" > Play Chanting</button>
<button name=play3 value=play3 onclick="sound.play('Finishing')" > Play Finishing</button>   

 </br></br></br></br></br>

  <input name="myrate" type="text" id="myrate" value="0.5"></input>  
    <br>
    <button name=playmyrate value=playmyrate onclick="playspeed()" > Play by speed</button>
    <br/>
 </br></br></br></br></br>
<div id="timeDiv">
</div>    

 </br></br></br></br></br>
<!-- <div class="lyrics-1"> -->
    
<div id="rabbit-lyrics" class="rabbit-lyrics" data-audio="#audio-1">
[00:00.00] 　なっみょうほう      れん    げ    きょう    
南無妙法蓮華經
nam myo           ho          ren     ge     kyo
    
[00:40.00] みょうほう      れん    げ     きょう
妙法蓮華經
myo           ho          ren     ge     kyo
   
[00:42.00] ほう  べん ぽん だい に
方便品。第二。
ho ben pon dai ni

[00:43.00]に じ せ そん じゅう さん まい  あんじょう
爾時世尊。從三昧。安詳
ni ji se son ju san mai an jo


[00:47.00]に き      ご しゃり    ほつ
而起。 吿舍利佛。諸
ni  ki      go sha ri ho tsu sho

[00:49.00]ぶっちえ　じんじん	　むりょう　ご	
佛智慧。甚深無量。其
but  chie   jinjin           muryo       go 

[00:51.00]ちえ　もん　なんげ　　なんりゅ　 いっさい
智慧門。難解難入。一切
chie    mon   nange       nanryu         issai 

[00:53.00]ちょうもん　　ひゃく　し　ぶつ　しょ
聲聞。辟支佛。所
shomon              hyaku   shi    butsu     sho 

[00:55.00]ふ　のう　ち　しょ　い　　しゃが　　ぶつ
不能知。所以者何。佛
fu    nou    chi   sho      i         sha ga     butsu

[00:57.00]ぞう　しん　ごん　きゃく　しぇん　　まん　　のく　
曾親近。百千萬億
zo       shin    gon     hyaku     sen           man       noku 

[00:59.00]む　　しゅ　しょ　　ぶつ　　じん　　ぎょう
無數諸佛。盡行
mu      shu     sho      butsu         jin         gyou

[01:01.00]しょ　　ぶつ　　むりょう　どうほう  ゆう　みょう
諸佛。無量道法。勇猛
sho        butsu      muryou    douhou     yuu     myou 


[01:03.00]しょうじん　みょうしょう　　ふもん　　じょうじゅ
精進。名稱普聞。成就
shoujin           myoushou         fumon           joju


[01:05.00]じんじん　　　みぞううほう　　　　ずいぎしょ
甚深。未曾有法。隨宜所
jinjin                  mizouhou                     zui gi sho 

[01:07.00]せつ　　いしゅ　なんげ　しゃりほつ　
說。意趣難解。舍利佛
setsu     ishu nange shari hotsu

[01:09.00]ごじゅう じょう　　ぶつ　　いらい　　　しゅじゅ　いんえん
吾從成佛已來。種種因緣。
go juu jo butsu irai shuju innen

[01:11.00]しゅじゅ　ひゆ　こうえん　ごんきょう　む
種種譬喻。廣演言教。無
shuju hiyu ko en gonkyo mu

[01:13.00]しゅ　ほうべん　いんどう　しゅじょう　りょうり
數方便。引導眾生。令離
shu hoben indo shujo ryo ri

[01:15.00]しょじゃく　しょいしゃが　にょらい
諸著。所以者何。如來
sho jaku shoi sha ga nyorai

[01:17.00]ほうべん　ちけん　はらみつ　かい
方便。知見波羅蜜。皆
hoben chiken haramitsu kai

[01:19.00]いぐそく　しゃりほつ　にょらい　
已具足。舍利佛。如來
i gu soku shri hotsu nyorai

[01:21.00]ちけん　こうだい　じんおん　むりょう
知見。廣大深遠。無量
chiken kodai jinnon muryo

[01:23.00]むげ　りき　むしょい　ぜんじょう
無礙。力。無所畏。禪定。
muge riki mushoi zenjo

[01:25.00]げだっさんまい　じんゆう　むさい
解脫。三昧。深入無際。
gedas sanmai jin nyu musai 

[01:27.00]じょうじゅ　いっさい　みぞううほう　しゃり
成就一切。未曾有法。舍利
joju issai mizou ho shari

[01:29.00]ほつ　にょらいのう　しゅじゅ　ふん
佛。如來能。種種分
hotsu nyorai no shuju fun

[01:32.00]べつ　ぎょうせっしょほう　ごん
別。巧說諸法。言
betsu gyo sessho ho gon 

[01:34.00]じにゅうなん　えっか　しゅしん　しゃり
辭柔輭。你悅可眾心。舍利
ji nyunan ekka shushin shari

[01:36.00]ほつ　しゅようごんし　むりょう
佛。取要言之。無量
hotsu shu yo gon shi muryo

[01:38.00]むへん　みぞううほう　ぶっしつ
無邊。未曾有法。佛悉
muhen mizou ho busshitsu

[01:40.00]じょうじゅ　しゃりほつ　ふしゅぶ
成就。止。舍利佛。不須復
joju shi sharihotsu fu shu bu

[01:42.00]せつ　しょいしゃが　ぶっしょ
說。所以者何。佛所
setsu shoi sha ga bussho

[01:44.00]じょうじゅ　だいいちけう　なんげし
成就。第一希有。難解之
joju dai ichi keu nange shi

[01:46.00]ほう　ゆいぶつよぶつ　ないのう
法。唯佛與佛。乃能
ho yui butsu yo butsu nai no 

[01:48.00]くじん　しょほう　じっそう
究盡。諸法實相。
kujin shoho jisso

[01:50.00]しょいしょほう　にょぜそう
所謂諸法。如是相。
shoi shoho nyo ze so 

[01:52.00]にょぜしょう　にょぜたい
如是性。如是體。
nyo ze sho nyo ze tai

[01:54.00]にょぜりき　にょぜさ
如是力。如是作。
nyo ze riki nyo ze sa

[01:56.00]にょぜいん　にょぜえん
如是因。如是緣。
nyo ze in nyo ze en

[01:58.00]にょぜか　にょぜほう
如是果。如是報。
nyo ze ka nyo ze ho 

[02:00.00]にょぜほまっくきょうとう
如是本末究竟等。
nyo ze honmak kukyo to 

[02:02.00]しょいしょほう　にょぜそう
所謂諸法。如是相。
shoi shoho nyo ze so 

[02:04.00]にょぜしょう　にょぜたい
如是性。如是體。
nyo ze sho nyo ze tai

[02:04.00]にょぜりき　にょぜさ
如是力。如是作。
nyo ze riki nyo ze sa

[02:06.00]にょぜいん　にょぜえん
如是因。如是緣。
nyo ze in nyo ze en

[02:07.50]にょぜか　にょぜほう
如是果。如是報。
nyo ze ka nyo ze ho 

[02:09.00]にょぜほまっくきょうとう
如是本末究竟等。
nyo ze honmak kukyo to 
    
[02:10.50]しょいしょほう　にょぜそう
所謂諸法。如是相。
shoi shoho nyo ze so 

[02:12.00]にょぜしょう　にょぜたい
如是性。如是體。
nyo ze sho nyo ze tai

[02:13.50]にょぜりき　にょぜさ
如是力。如是作。
nyo ze riki nyo ze sa

[02:15.00]にょぜいん　にょぜえん
如是因。如是緣。
nyo ze in nyo ze en

[02:16.50]にょぜか　にょぜほう
如是果。如是報。
nyo ze ka nyo ze ho 

[02:18.00]にょぜほまっくきょうとう
如是本末究竟等。
nyo ze honmak kukyo to     


[02:24.00]みょうほうれんげきょう
妙法蓮華經
myo ho ren ge kyo 

[02:27.00]にょらいじゅりょうほん　だいじゅうろく
如來壽量品第十六
nyo rai juryohon dai juroku

[02:29.00]じがとくぶっらい
自我得佛來
ji ga toku burrai

[02:31.00]しょきょうしょこっしゅ
所經諸劫數
sho kyo sho kosshu

[02:33.00]むりょう　きゃく　せん　まん
無量百千萬
muryo hyaku sen man

[02:34.00]おく　さい　あそうぎ
億載阿僧祇
oku sai asogi

[02:35.00]じょうせっぽうきょうけ
常說法教化
jo seppo kyoke

[02:36.00]むしゅおくしゅじょう
無數億眾生
mushu oku shujo

[02:37.00]りょうにゅうおぶつどう
令入於佛道
ryo nyu o butsudo

[02:38.00]にらいむりょうこう
爾來無量劫
nirai muryo ko 

[02:39.00]いどしゅじょうこ
為度眾生故
i do shujo ko

[02:40.00]ほうべんげんえはん
方便現涅槃
hoben gen nehan

[02:41.00]にじつふめつど
而實不滅度
ni jitsu fu metsudo 

[02:42.00]じょうじゅうしせっぽう
常住此說法
jo ju shi seppo

[02:43.00]がじょうじゅうおし
我常住於此
go jo ju o shi 

[02:44.00]いしょじんずうりき
以諸神通力
i sho jinzuriki

[02:45.00]りょうてんどうしゅじょう
令顛倒眾生
ryo tendo shujo

[02:46.00]すいごんいふけん
雖近而不見
sui gon ni fu ken 

[02:47.50]しゅけんがめつど
眾見我滅度
shu ken ga metsudo

[02:49.00]こうくようしゃり
廣供養舍利
ko kuyo shari

[02:50.50]げんかいえれんお
咸皆懷戀慕
gen kai e rendo 

[02:52.00]にしょうかつごうしん
而生渴仰心
ni sho katsugo shin

[02:53.50]しゅじょうきしんぶく
眾生既信伏
shujo ki shinbuku

[02:55.00]しちじきいにゅうなん
質直意柔軟
shichijiki i nyunan

[02:56.50]いっしん　よっけん　ぶつ
一心欲見佛
isshin yokken butsu

[02:58.00]ふじしゃくしんみょう
不自惜身命
fu ji shaku shinmyo

[02:59.50]じがぎゅうしゅそう
時我及眾僧
ji ga gyu shuso

[03:01.00]くしゅつりょうじゅせん
俱出靈鷲山
ku shutsu ryojusen

[03:02.50]がじごしゅじょう
我時語眾生
ga ji go shujo

[03:04.00]じょうざいしふめつ
常在此不滅
jo zai shi fumetsu

[03:05.50]いほうべんりっこ
以方便力故
i ho ben rikko

[03:07.00]げぬめつふめつ
現有滅不滅
gen u metsu fu metsu

[03:08.50]よこくうしゅじょう
餘國有眾生
yo koku u shujo 

[03:10.00]くぎょうしんぎょうしゃ
恭敬信樂者
kugyo shingyo sha

[03:11.50]がぶおひちゅう
我復於彼中
ga bu o hi chu

[03:13.00]いせつうじょうほう
為說無上法
i setsu mujo ho 

[03:14.50]にょとうふもんし
汝等不聞此
nyoto fu mon shi 

[03:16.00]たんいがめつど
但謂我滅度
tan ni ga metsu do

[03:17.50]がけんしょしゅじょう
我見諸眾生
ga ken sho shujo 

[03:19.00]もつざいおくかい
沒在於苦惱
motsu zai o kukai

[03:20.50]こふいげんしん
故不為現身
ko fu i gen shin

[03:22.00]りょうごしょうかつごう 
令其生渴仰
ryo go sho katsu go

[03:23.50]いんごしんれんぼ
因其心戀慕
in go shin renbo

[03:25.00]ないしゅついせっぽう
乃出為說法
nai shutsu i seppo

[03:26.50]じんずうりきにょぜ
神通力如是
jin zu riki nyo ze

[03:28.00]おあそうぎこう
於阿僧祇劫
o asogi ko 

[03:29.50]じょうざいりょうじゅせん
常在靈鷲山
jo zai ryojusen

[03:31.00]ぎゅうよしょじゅうしょ
乃餘諸住處
gyu yo sho jusho

[03:32.50]しゅじょうけんこうじん
眾生見劫盡
shujo ken kou jin

[03:34.00]だいかしょしょうじ
大火所燒時
dai ka sho shou ji

[03:35.50]がしどあんのん
我此土安隱
ga shi do annon

[03:37.00]てんいんじょうじゅうまん
天人常充滿
tennin jou juuman

[03:38.50]おんりんしょどうかく
園林諸堂閣
onrin sho dou kaku

[03:40.00]しゅじゅほうしょうごん
種種寶莊嚴
shuju hou shougon

[03:41.50]ほうじゅたけか
寶樹多華果
houju ta keka

[03:43.00]しゅじょうしょゆうらく
眾生所遊樂
shujou sho yuu raku

[03:44.50]しょてんぎゃくてんく
諸天擊天鼓
shoten gyaku tenku

[03:46.00]じょうさっしゅぎがく
常作眾伎樂
jou sasshu gi gaku

[03:47.50]うまんだらけ
雨曼陀羅華
u mandara ke

[03:49.00]さんぶつぎゅうだいしゅ
散佛及大眾
san butsu gyuu daishu

[03:50.50]がじょうどふき
我淨土不毀
ga joudo fu ki

[03:52.00]にしゅけんしょうじん
而眾見燒盡
ni shu ken shou jin

[03:53.50]うふしょくのう
憂怖諸苦惱
ufu sho kunou

[03:55.00]にょぜしつじゅうまん
如是悉充滿
nyo ze shitsu juuman

[03:56.50]ぜしょざいしゅじょう
是諸罪眾生
ze sho zai shujou

[03:58.00]いあくごういんえん
以惡業因緣
i akugou innen

[03:59.50]かあそうぎこう
過阿僧祇劫
ka asougi kou

[04:01.00]ふもんさんぼうみょう
不聞三寶名
fu mon sanbou myou

[04:02.50]しょうしゅくどく
諸有修功德
sho u shu kudoku

[04:04.00]にゅうわしちじきしゃ
柔和質直者
nyuuwa shichijiki sha

[04:05.50]そっかいけんがしん
則皆見我身
sokkai ken gashin

[04:07.00]ざいしにせっぽう
在此而說法
zai shi ni sepppou

[04:08.50]わくじいししゅ
或時為此眾
wakuji i shi shu

[04:10.00]せつぶつじゅむりょう
說佛壽無量
setsu butsuju muryou

[04:11.50]くないけんぶっしゃ
久乃見佛者
ku nai ken bussha

[04:13.00]いせつぶつなんち
為說佛難值
i setsu butsu nan chi

[04:14.50]がちりきにょぜ
我智力如是
ga chiriki nyo ze

[04:16.00]えこうしょうむちょう
慧光照無量
ekou shou muryou

[04:17.50]じゅみょうむしゅこう
壽命無數劫
jumyou mushu kou

[04:19.00]くしゅごうしょとく
久修業所得
ku shugou sho toku

[04:20.50]にょとううちしゃ
汝等有智者
nyotou u chi sha

[04:22.00]もっとししょうぎ
勿於此生疑
motto shi shou gi

[04:23.50]とうだんりょうようじん
當斷令永盡
tou dan ryou you jin

[04:25.00]ぶつごじっぷこ
佛語實不虛
butsu go jippuko

[04:26.50]にょいぜんほうべん
如醫善方便
nyo i zen houben

[04:28.00]いじおうしこ
為治狂子故
i ji ou shi ko

[04:29.50]じつざいにごんし
實在而言死
jitsu zai ni gon shi

[04:31.00]むのうせっこもう 
無能說虛妄
mu nou sekkomou

[04:32.50]がやくいせぶ
我亦為世父
ga yaku i se bu

[04:34.00]くしょくげんしゃ
救諸苦患者
ku sho kugen sha

[04:35.50]いぼんぶてんどう
為凡夫顛倒
i bonbu tendou

[04:37.00]じつざいにごんめつ
實在而言滅
jitsu zai ni gon metsu

[04:38.50]いじょうけんがこ
以常見我故
i jouken ga ko

[04:40.00]にしょうきょうししん
而生憍恣心
ni shou kyoushi shin

[04:41.50]ほういつじゃくごよく
放逸著五欲
hou itsu jaku goyoku

[04:43.00]だおあくどうちゅう
墮於惡道中
da o aku dou chuu

[04:44.50]がじょうちしゅじょう
我常知眾生
ga jou chi shujou

[04:46.00]ぎょうどうふぎょうどう
行道不行道
gyou dou fu gyou dou

[04:47.50]ずいおうしょかど
隨所應可度
zui ou sho ka do

[04:49.00]いせっしゅじゅほう
為說種種法
i sesshuju hou

[04:50.50]まいじさぜねん
每自作是意
mai ji sa ze nen

[04:52.00]いがりょうしゅじょう
以何令眾生
i ga ryou shujou

[04:53.50]とくにゅうむじょうどう
得入無上道
toku nyuu mu jou dou

[04:55.00]そくじょうじゅぶっしん
速成就佛身
soku jouju busshin

</div>
    
<script> 
parseLyrics(document.getElementById('rabbit-lyrics'));
    
synchronize(5.1);
</script>
</body>
</html>
